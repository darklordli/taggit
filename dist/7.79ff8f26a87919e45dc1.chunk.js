webpackJsonp([7,19],{498:function(t,e,i){var a,s;i(499),a=i(500),s=i(501),t.exports=a||{},t.exports.__esModule&&(t.exports=t.exports.default),s&&(("function"==typeof t.exports?t.exports.options:t.exports).template=s)},499:function(t,e){},500:function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=i(9),c=a(s),o=i(11),l=a(o);e.default={data:function(){return{self:this,selectData:[],globalId:0,pageTotal:0,upUrl:"",songlistdata:{name:"",childname:"",type:"",playtype:"",img_large:"",img_small:""},columns:[{type:"selection",width:50,align:"center"},{title:"ID",key:"rid",align:"center",sortable:!0},{title:"资源名称",key:"rname",sortable:!0,ellipsis:!0},{title:"APP名称",key:"nick_name",render:function(t,e,i){return'<i-input placeholder="" :value="resList['+i+'].nick_name" @on-enter="saveItemEdit('+i+", '"+e.key+"')\"></i-input>"}},{title:"集数",key:"sort",align:"center",render:function(t,e,i){return'<i-input class="number-input" number placeholder="" :value="resList['+i+'].sort" @on-enter="saveItemEdit('+i+", '"+e.key+"')\"></i-input>"}},{title:"分类",key:"category",align:"center"},{title:"状态",key:"clevel",align:"center",render:function(t){var e=l.default.getResouceStatus(t.clevel);return e}},{title:"操作",key:"action",width:150,align:"center",render:function(t,e,i){return'<i-button type="error" size="small" @click="removeItem('+i+')">删除</i-button>'}}],resList:[]}},ready:function(){this.getSongInfo(0),this.upUrl=c.default.ajaxUrl+"/fileinput"},methods:{showEdit:function(){},getSongInfo:function(t){var e=this;l.default.ajax({method:"get",url:c.default.ajaxUrl+"/album/"+this.globalId,params:{from:t,offset:20}}).then(function(t){var i=t.data;0==i.result?(e.songlistdata=i.data,e.resList=i.data.rids,e.pageTotal=i.data.total,e.songlistdata.type=l.default.getAlbumType(e.songlistdata.type)):e.$Message.warning({title:i.desc})}).catch(function(t){console.log(t)})},selectChange:function(t){this.selectData=t},removeAll:function(){var t=this,e=this,i={res_db:"ai",rids:[]};e.selectData.forEach(function(t,e,a){i.rids.push(t.rid)}),l.default.ajax({method:"post",url:c.default.ajaxUrl+"/album/resources/unset/"+this.globalId,data:i}).then(function(i){var a=i.data;0==a.result?(t.$Notice.success({title:"删除成功!"}),e.selectData.forEach(function(t,i,a){e.resList.forEach(function(i,a,s){i.id===t.id&&e.resList.splice(a,1)})})):t.$Notice.warning(a.desc)}).catch(function(t){console.log(t)})},removeItem:function(t){var e=this,i=this.resList[t].rid,a={res_db:"ai",rids:[i]};l.default.ajax({method:"post",url:c.default.ajaxUrl+"/album/resources/unset/"+this.globalId,data:a}).then(function(i){var a=i.data;0==a.result?(e.$Notice.success({title:"删除成功!"}),e.resList.splice(t,1)):e.$Notice.warning({title:a.desc})}).catch(function(t){console.error(t)})},mockTableData:function(){return this.resList},changePage:function(t){this.getSongInfo(t)},saveItemEdit:function(t,e){var i=this,a=event.target;console.log(e);var s=(this.resList[t].id,this.resList[t].rid);"nick_name"==e&&(this.resList[t].nick_name=a.value),"sort"==e&&(this.resList[t].sort=a.value);var o={nick_name:this.resList[t].nick_name,sort:this.resList[t].sort};l.default.ajax({method:"post",url:c.default.ajaxUrl+"/album/resources/"+this.globalId+"/"+s+"?res_db=aires",data:o}).then(function(t){var e=t.data;0==e.result?i.$Notice.success({title:"修改成功!"}):i.$Notice.warning({title:e.desc})}).catch(function(t){console.log(t)})},outItem:function(){},importInfo:function(){},createdFinish:function(){this.$router.go({name:"categorylist"})},handleFormatError:function(t){this.$Notice.warning({title:"文件格式不正确",desc:"文件 "+t.name+" 格式不正确，请上传 txt 或 csv 格式的图片。"})},handleMaxSize:function(t){this.$Notice.warning({title:"超出文件大小限制",desc:"文件 "+t.name+" 太大，不能超过 10M。"})},handleSuccess:function(t,e){this.$Notice.success({title:"上传成功!"})}},route:{data:function(t){this.globalId=t.to.params.listid,t.next()}}}},501:function(t,e){t.exports=' <div class=layout-header _v-309bc277=""> </div> <div class=layout-breadcrumb _v-309bc277=""> <breadcrumb _v-309bc277=""> <breadcrumb-item _v-309bc277="">首页</breadcrumb-item> <breadcrumb-item _v-309bc277="">歌单管理</breadcrumb-item> <breadcrumb-item _v-309bc277="">歌单列表</breadcrumb-item> </breadcrumb> </div> <div class=layout-content _v-309bc277=""> <div class=layout-content-main _v-309bc277=""> <row _v-309bc277=""> <steps :current=2 _v-309bc277=""> <step title=编辑专辑 content=专辑内容编辑.. _v-309bc277=""></step> <step title=添加资源 content=歌单内容编辑.. _v-309bc277=""></step> <step title=资源整理 content=整理已添加的资源.. _v-309bc277=""></step> </steps> </row> <div class=file-upload _v-309bc277=""> <div _v-309bc277=""> <upload :format="[\'xls\', \'xlsx\', \'csv\']" :on-format-error=handleFormatError :max-size=10240 :on-exceeded-size=handleMaxSize :on-success=handleSuccess multiple="" :action=upUrl _v-309bc277=""> <i-button type=primary icon=ios-cloud-upload-outline _v-309bc277="">批量导入信息</i-button> </upload> </div> </div> <row type=flex justify=start align=middle _v-309bc277=""> <i-col span=12 _v-309bc277=""> <row class=detail-row _v-309bc277=""> <i-col span=5 class=col-right _v-309bc277="">专辑名称：</i-col> <i-col span=5 class=col-left _v-309bc277="">{{songlistdata.name}}</i-col> </row> <row class=detail-row _v-309bc277=""> <i-col span=5 class=col-right _v-309bc277="">子专辑名称：</i-col> <i-col span=5 class=col-left _v-309bc277="">{{songlistdata.childname}}</i-col> </row> <row class=detail-row _v-309bc277=""> <i-col span=5 class=col-right _v-309bc277="">类型：</i-col> <i-col span=5 class=col-left _v-309bc277="">{{songlistdata.type}}</i-col> </row> <row class=detail-row _v-309bc277=""> <i-col span=5 class=col-right _v-309bc277="">播放形式：</i-col> <i-col span=5 class=col-left _v-309bc277="">{{songlistdata.playtype}}</i-col> </row> </i-col> <i-col span=6 _v-309bc277=""> <img :src=songlistdata.img_large alt=小图 _v-309bc277=""> </i-col> <i-col span=6 _v-309bc277=""> <img :src=songlistdata.img_small alt=大图 _v-309bc277=""> </i-col> </row> <div class=main-hd _v-309bc277=""> 资源列表 </div> <div class=main-table _v-309bc277=""> <i-table :content=self :columns=columns :data=resList @on-selection-change=selectChange _v-309bc277=""></i-table> <div style="margin: 10px;overflow: hidden" _v-309bc277=""> <div class="" _v-309bc277=""> <i-button type=error @click=removeAll _v-309bc277="">批量删除</i-button> </div> <div style="float: right" _v-309bc277=""> <page :total=pageTotal :page-size=20 show-total="" :current=1 show-sizer="" @on-change=changePage show-elevator="" _v-309bc277=""></page> </div> </div> </div> <div class=btn-box _v-309bc277=""> <i-button type=success @click=createdFinish _v-309bc277="">完成</i-button> </div> </div> </div> '}});