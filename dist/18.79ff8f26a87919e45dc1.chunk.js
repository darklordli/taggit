webpackJsonp([18,19],{572:function(t,e){"use strict";function a(t){return t.selectTableData}Object.defineProperty(e,"__esModule",{value:!0}),e.getTags=a},578:function(t,e,a){var i,s;a(579),i=a(580),s=a(581),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports.default),s&&(("function"==typeof t.exports?t.exports.options:t.exports).template=s)},579:function(t,e){},580:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=a(9),n=(i(s),a(11)),o=i(n),r=a(572);e.default={data:function(){return{logininfo:"",classid:null,classifylist:[],taglist:[],tagnew:{},tmptaglist:{id:[],append:0,data:[{res_db:"aires",resources:[]}],clevel:"",userinfo:{editor:"",editor_email:""}}}},ready:function(){this.getlogininfo(),this.endids(),this.getclass()},vuex:{getters:{tagsData:r.getTags}},methods:{getlogininfo:function(){this.logininfo=o.default.getCookie("CURRENT_USER"),this.logininfo=JSON.parse(JSON.parse(this.logininfo))},endids:function(){var t=this;this.tagsData.forEach(function(e){t.tmptaglist.data[0].resources.push(e.id)})},getclass:function(){var t=this,e="/airesources/"+this.tagsData[0].id+"?tags=1&userinfo=1&tagnew=1&tagtree=1";o.default.ajax({method:"GET",url:o.default.getUrl(e)}).then(function(e){t.getclasslist()}).catch(function(t){console.error(t)})},getclasslist:function(){var t=this,e={appId:"",id:0,type:0};o.default.ajax({method:"POST",url:o.default.getUrl("/tag/list"),data:e}).then(function(e){t.classifylist=e.data.data.children,t.classspinShow=!1}).catch(function(t){console.error(t)})},gettaglist:function(t){var e=this,a={appId:"",id:t[0].id};o.default.ajax({method:"POST",url:o.default.getUrl("/tag/list"),data:a}).then(function(t){e.taglist=t.data.data.children,e.classname=t.data.data.title,e.tagnew={},e.tagsspinShow=!1}).catch(function(t){console.error(t)})},checkalltags:function(t){o.default.checkedtruetree(t.children)},tosave:function(){var t=this;this.tmptaglist.clevel=2,this.$Modal.confirm({title:"确认批量清除这些标签？",onOk:function(){t.tosend()},onCancel:function(){return!1}})},tosubmit:function(){var t=this;this.tmptaglist.clevel=3,this.$Modal.confirm({title:"确认批量清除这些标签？",onOk:function(){t.tosend()},onCancel:function(){return!1}})},tosend:function(){var t=this,e=this.$refs.tagtree;e.forEach(function(e,a){t.tagnew[a]=[];var i=e.$children[0].getCheckedNodes();i.forEach(function(e){e.id?t.tagnew[a].push(e.id):t.tagnew[a].push(e.tagId)})});var a=[];for(a in this.tagnew)this.tagnew[a].forEach(function(e){t.tmptaglist.id.push(e)});this.tmptaglist.userinfo.editor=this.logininfo.loginName,this.tmptaglist.userinfo.editor_email=this.logininfo.email,o.default.ajax({method:"POST",url:o.default.getUrl("/tag/resources/unset"),data:this.tmptaglist}).then(function(e){return e.data.result==-4?(t.$Notice.error({title:"操作失败",desc:"您选择的标签均没有与资源有关联～"}),!1):void o.default.tip(e)}).catch(function(t){console.error(t)})}}}},581:function(t,e){t.exports=' <div class=layout-header _v-6dffeaeb=""></div> <div class=layout-breadcrumb _v-6dffeaeb=""> <breadcrumb _v-6dffeaeb=""> <breadcrumb-item _v-6dffeaeb="">首页</breadcrumb-item> <breadcrumb-item _v-6dffeaeb="">音频资源管理</breadcrumb-item> <breadcrumb-item _v-6dffeaeb="">批量清除标签</breadcrumb-item> </breadcrumb> </div> <div class=layout-content _v-6dffeaeb=""> <div class=layout-content-main _v-6dffeaeb=""> <menu mode=horizontal :theme=theme1 active-key=1 _v-6dffeaeb=""> <menu-item key=1 _v-6dffeaeb=""> 批量清除标签 </menu-item> </menu> <p class=num_wrapper _v-6dffeaeb="">共选择 {{tagsData.length}} 条资源，请选择需要清除的标签，分类不清除</p> <card class="classwrapper cf" _v-6dffeaeb=""> <p slot=title _v-6dffeaeb="">分类</p> <tree :data=classifylist @on-select-change=gettaglist _v-6dffeaeb=""> </tree> </card> <card class=tagwrapper _v-6dffeaeb=""> <p slot=title _v-6dffeaeb=""><b _v-6dffeaeb="">{{classname}}</b> 分类的标签：</p> <template v-for="item in taglist" v-ref:tagtree="" _v-6dffeaeb=""> <a type=border class=taggrouplink @click.prevent.stop=checkalltags(item) _v-6dffeaeb=""> {{item.title}} </a> <card class=cf _v-6dffeaeb=""> <tree :data=item.children show-checkbox="" _v-6dffeaeb=""> </tree> <spin size=large v-if=tagsspinShow _v-6dffeaeb=""></spin> </card> </template> </card> <p class=btn_wrapper _v-6dffeaeb=""> <i-button type=warning icon=ios-compose size=large v-on:click.stop.prevent=tosave() _v-6dffeaeb="">批量保存</i-button> <i-button type=success icon=checkmark-round size=large v-on:click.stop.prevent=tosubmit() _v-6dffeaeb="">批量提交</i-button> </p> </div> </div> '}});