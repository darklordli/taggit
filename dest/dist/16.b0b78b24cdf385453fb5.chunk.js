webpackJsonp([16],{564:function(t,e){"use strict";function a(t){return t.selectTableData}Object.defineProperty(e,"__esModule",{value:!0}),e.getTags=a},570:function(t,e,a){var i,s;a(571),i=a(572),s=a(573),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports.default),s&&(("function"==typeof t.exports?t.exports.options:t.exports).template=s)},571:function(t,e){},572:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=a(9),o=(i(s),a(11)),c=i(o),n=a(564);e.default={data:function(){return{logininfo:"",classid:null,classifylist:[],taglist:[],tmptaglist:{id:[],append:0,data:[{res_db:"aires",resources:[]}],clevel:"",userinfo:{editor:"",editor_email:""}}}},ready:function(){this.getlogininfo(),this.endids(),this.getclass(),this.getclasslist()},vuex:{getters:{tagsData:n.getTags}},methods:{getlogininfo:function(){this.logininfo=c.default.getCookie("CURRENT_USER"),this.logininfo=JSON.parse(JSON.parse(this.logininfo))},endids:function(){var t=this;this.tagsData.forEach(function(e){t.tmptaglist.data[0].resources.push(e.id)})},getclass:function(){var t=this,e="/airesources/"+this.tagsData[0].id;console.log(e),c.default.ajax({method:"GET",url:c.default.getUrl(e)}).then(function(e){t.classid=e.data.data.catearr.id,console.log(t.classid)}).catch(function(t){console.error(t)})},getclasslist:function(){var t=this,e={appId:"",id:0,type:0};c.default.ajax({method:"POST",url:c.default.getUrl("/tag/list"),data:e}).then(function(e){console.log("分类"),t.classifylist=e.data.data.children,c.default.selectclass(t.classifylist,t.classid),t.gettaglist(t.classid),c.default.expandtree(t.classifylist)}).catch(function(t){console.error(t)})},gettagnode:function(t){this.gettaglist(t[0].id)},gettaglist:function(t){var e=this,a={appId:"",id:t};c.default.ajax({method:"POST",url:c.default.getUrl("/tag/list"),data:a}).then(function(t){e.taglist=t.data.data.children,console.log(e.taglist)}).catch(function(t){console.error(t)})},savetags:function(t){var e=this;console.log(t),t.forEach(function(t){e.tmptaglist.id.push(t.id)})},toclean:function(){var t=this;this.$Modal.confirm({title:"确认批量清除标签？",onOk:function(){t.tosubmit()},onCancel:function(){return!1}})},tosubmit:function(){this.tmptaglist.clevel=3,this.tosend()},tosend:function(){this.tmptaglist.userinfo.editor=this.logininfo.loginName,this.tmptaglist.userinfo.editor_email=this.logininfo.email,c.default.ajax({method:"POST",url:c.default.getUrl("/tag/resources/unset"),data:this.tmptaglist}).then(function(t){c.default.tip(t)}).catch(function(t){console.error(t)})}}}},573:function(t,e){t.exports=' <div class=layout-header _v-b52e6a2c=""></div> <div class=layout-breadcrumb _v-b52e6a2c=""> <breadcrumb _v-b52e6a2c=""> <breadcrumb-item _v-b52e6a2c="">首页</breadcrumb-item> <breadcrumb-item _v-b52e6a2c="">音频资源管理</breadcrumb-item> <breadcrumb-item _v-b52e6a2c="">批量清除标签</breadcrumb-item> </breadcrumb> </div> <div class=layout-content _v-b52e6a2c=""> <div class=layout-content-main _v-b52e6a2c=""> <menu mode=horizontal :theme=theme1 active-key=1 _v-b52e6a2c=""> <menu-item key=1 _v-b52e6a2c=""> 批量清除标签 </menu-item> </menu> <p class=num_wrapper _v-b52e6a2c="">共选择 {{tagsData.length}} 条记录，请选择清除内容</p> <card class="classwrapper cf" _v-b52e6a2c=""> <p slot=title _v-b52e6a2c="">分类</p> <tree :data=classifylist @on-select-change=gettagnode _v-b52e6a2c=""> </tree> </card> <card class=tagwrapper _v-b52e6a2c=""> <p slot=title _v-b52e6a2c="">标签</p> <template v-for="item in taglist" _v-b52e6a2c=""> <tag type=border color=blue _v-b52e6a2c="">{{item.title}}</tag> <card class=cf _v-b52e6a2c=""> <tree :data=item.children show-checkbox="" @on-check-change=savetags _v-b52e6a2c=""> </tree> </card> </template> </card> <p class=btn_wrapper _v-b52e6a2c=""> <i-button type=error icon=android-delete size=large v-on:click.stop.prevent=toclean() _v-b52e6a2c="">清除</i-button> </p> </div> </div> '}});