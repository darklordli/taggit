webpackJsonp([1],{470:function(t,e,i){var r,o;i(471),r=i(472),o=i(478),t.exports=r||{},t.exports.__esModule&&(t.exports=t.exports.default),o&&(("function"==typeof t.exports?t.exports.options:t.exports).template=o)},471:function(t,e){},472:function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(6),n=r(o),a=i(11),l=r(a),c=i(473),s=r(c);e.default={data:function(){var t=function(t,e,i){""===e?i(new Error("必填项不能为空!")):i()};return{basicModel:{title:"abc",show:!1,action:"newCategory"},toggle:{state:!1,name:"展开全部"},tableColumns:[{title:"分类名称",key:"title",width:250,render:function(t,e,i){var r="";r=t.open?'<Icon type="chevron-down" @click.stop.prevent="close('+i+","+t.depth+')"></Icon>':'<Icon type="chevron-right" @click.stop.prevent="open('+i+","+t.depth+')"></Icon>';var o=20*t.depth,a='<span style="display: inline-block;width:'+o+'px">&nbsp;</span>',l=(0,n.default)(t),c='<span style="display:none;">'+l+"</span>";return 0===t.childrenCount?""+a+t.title+"("+t.res_count+")"+c:""+a+r+" "+t.title+"("+t.res_count+")"+c}},{title:"语义",align:"center",width:150,render:function(t,e,i){var r="";return r=t.nickname[0]?'<Poptip trigger="hover" title="'+t.nickname.length+'个规约词" placement="bottom">\n                                    <tag color="blue" @click="editWord('+t.id+',\'nickname\');">规约词</tag>\n                                    <div slot="content">\n                                        <ul><li v-for="item in treedata['+i+'].nickname" style="text-align: center;padding: 4px">{{ item }}</li></ul>\n                                    </div>\n                                </Poptip>':'<Tag color="blue" @click="editWord('+t.id+",'nickname');\">规约词</Tag>",r+=t.directname[0]?'<Poptip trigger="hover" title="'+t.directname.length+'个直达词" placement="bottom">\n                                    <tag color="green" @click="editWord('+t.id+',\'directname\');">直达词</tag>\n                                    <div slot="content">\n                                        <ul><li v-for="item in treedata['+i+'].directname" style="text-align: center;padding: 4px">{{ item }}</li></ul>\n                                    </div>\n                                </Poptip>':'<Tag color="green" @click="editWord('+t.id+",'directname');\">直达词</Tag>"}},{title:"所属类别",key:"type",align:"center",width:100,render:function(t){switch(t.type){case 1:return"标签组";case 2:return"标签";case 0:default:return"分类"}}},{title:"资源",key:"id",align:"center",width:100,render:function(t){var e='<a href="###" @click.stop.prevent="showDetail('+t.id+');">查看资源</a>';return e}},{title:"编辑人",key:"editor",align:"center",width:120},{title:"编辑时间",key:"updated_at",align:"center",width:350,render:function(t){return""}},{title:"操作1",key:"action",align:"center",width:280,fixed:"right",render:function(t){var e="",i='<i-button type="info" '+e+' size="small" @click="newChild('+t.id+',0);">添加子分类</i-button>&nbsp;&nbsp;';return i+='<i-button type="info" '+e+' size="small" @click="newChild('+t.id+',1);">添加标签组</i-button>&nbsp;&nbsp;',i+='<i-button type="info" '+e+' size="small" @click="newChild('+t.id+',2);">添加子标签</i-button>'}},{title:"操作2",key:"action",align:"center",width:140,fixed:"right",render:function(t){var e="";return e+='<i-button type="primary" size="small" @click="goEdit('+t.id+');">编辑</i-button>&nbsp;&nbsp;',e+='<i-button type="error" size="small" @click="del('+t.id+');">删除</i-button>'}}],tabledata:[],treedata:[],searchParams:{from:1,offset:10,pids2:0,res_total:1},formCustom:{title:"",id:0,type:0},ruleCustom:{title:[{validator:t,trigger:"blur"}]}}},ready:function(){this.loadData()},methods:{loadData:function(){var t=this;this.$Loading.start(),l.default.ajax({method:"POST",url:l.default.getUrl("/tag/list"),data:[]}).then(function(e){if(0!==e.data.result)return t.$Notice.error({title:e.data.msg,desc:e.data.desc,duration:0}),void t.$Loading.error();for(var i=e.data.data,r=i.children,o=0;o<r.length;o++)r[o].open=!1,r[o].depth=0,r[o].parentId=0,r[o].childrenCount=r[o].children.length;t.treedata=r,t.$Loading.finish()}).catch(function(t){console.error(t)})},changePage:function(t){this.currentPage=t,this.loadData()},toggleTreeGrid:function(){this.toggle.state?(this.collapseAll(),this.toggle.name="展开全部"):(this.expandAll(),this.toggle.name="折叠全部"),this.toggle.state=!this.toggle.state},expandAll:function(){for(var t=0;t<this.treedata.length;t++)this.open(t,this.treedata[t].depth)},collapseAll:function(){for(var t=0;t<this.treedata.length;t++)this.close(t)},open:function(t,e){e++;var i=this.treedata[t];i.open=!0;for(var r=i.children,o=0;o<r.length;o++){var n=r[o];n.depth=e,n.open=!1,n.parentId=i.id,n.childrenCount=n.children.length,this.treedata.splice(t+1,0,n)}},showDetail:function(t){this.$router.go({name:"tagsongs",params:{id:t}})},close:function(t){var e=this.treedata[t];e.open=!1,this.removeData(e.id)},removeData:function(t){for(var e=0,i=!0,r=this.treedata.length;e<r;i?e++:e)this.treedata[e]&&this.treedata[e].parentId===t?(this.treedata[e].childrenCount>0&&this.removeData(this.treedata[e].id),this.treedata.splice(e,1),i=!1):i=!0},changeOnline:function(t,e){var i=this,r=0===e?"确认切换至【下线】?":"确认切换至【上线】?";if(window.confirm(r)){var o=0===e?1:0,a={json:(0,n.default)({online:o})};l.default.ajax({method:"post",url:l.default.getUrl("/album/"+t),data:s.default.stringify(a)}).then(function(e){var r=e.data;0==r.result?(i.$Notice.success({title:"状态切换成功!"}),i.updateTableData(t,"online",o)):i.$$Notice.warning(r.desc)}).catch(function(t){console.log(t)})}},del:function(t){var e=this;if(window.confirm("确认删除?")){var i={id:[t],editor:"aiai"};l.default.ajax({method:"POST",url:l.default.getUrl("/tag/unset"),data:i}).then(function(t){return 0!==t.data.result?void e.$Notice.warning({title:"删除失败!",desc:t.data.desc}):(e.$Notice.success({title:"删除成功!"}),void e.loadData())}).catch(function(t){console.error(t)})}},goEdit:function(t){this.basicModel.title="编辑分类",this.basicModel.show=!0,this.basicModel.action="editCategory",this.formCustom.id=t,this.formCustom.title=this.getTableData(t,"title")},editWord:function(t,e){"nickname"===e?(this.basicModel.title="编辑规约词",this.basicModel.action="editNickname"):"directname"===e&&(this.basicModel.title="编辑直达词",this.basicModel.action="editDirectname"),this.basicModel.show=!0,this.formCustom.id=t;var i=this.getTableData(t,e);i instanceof Array&&(i=i.join(",")),this.formCustom.title=i},newCategory:function(){this.basicModel.title="添加分类",this.basicModel.show=!0,this.basicModel.action="newCategory"},newChild:function(t,e){"childTagGroup"===e?this.basicModel.title="添加标签组":"childTag"===e?this.basicModel.title="添加子标签":this.basicModel.title="添加子分类",this.basicModel.show=!0,this.basicModel.action="newCategory",this.formCustom.id=t,this.formCustom.title="",this.formCustom.type=e},saveCateogry:function(t){var e=this,i=function(t,i){l.default.ajax({method:"POST",url:l.default.getUrl("/tag/modify"),data:t}).then(function(t){return 0!==t.data.result?void e.$Notice.warning({title:"操作失败!",desc:t.data.desc}):(e.$Notice.success({title:"操作成功!"}),e.basicModel.show=!1,void(i&&i()))}).catch(function(t){console.error(t)})};this.$refs[t].validate(function(t){if(t){var r=e;if("newCategory"===e.basicModel.action){var o={appId:"roobo",pid:e.formCustom.id,name:e.formCustom.title,type:e.formCustom.type};l.default.ajax({method:"POST",url:l.default.getUrl("/tag/new"),data:o}).then(function(t){return 0!==t.data.result?void e.$Notice.warning({title:"添加失败!",desc:t.data.desc}):(e.$Notice.success({title:"添加成功!"}),e.basicModel.show=!1,void e.loadData())}).catch(function(t){console.error(t)})}else if("editCategory"===e.basicModel.action){var n={id:e.formCustom.id,name:e.formCustom.title};i(n,function(){r.updateTableData(n.id,"title",n.name)})}else if("editNickname"===e.basicModel.action){var a=e.formCustom.title.split(","),c={id:e.formCustom.id,nickname:a};i(c,function(){r.updateTableData(c.id,"nickname",a)})}else if("editDirectname"===e.basicModel.action){var s=e.formCustom.title.split(","),d={id:e.formCustom.id,directname:s};i(d,function(){r.updateTableData(d.id,"directname",s)})}}})},cancel:function(){},getTableData:function(t,e){for(var i="",r=0;r<this.treedata.length;r++)if(this.treedata[r].id===t){i=this.treedata[r][e];break}return i},updateTableData:function(t,e,i){for(var r=0;r<this.treedata.length;r++)if(this.treedata[r].id===t){this.treedata[r][e]=i;break}}}}},473:function(t,e,i){"use strict";var r=i(474),o=i(477),n=i(476);t.exports={formats:n,parse:o,stringify:r}},474:function(t,e,i){"use strict";var r=i(475),o=i(476),n={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},a=Date.prototype.toISOString,l={delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(t){return a.call(t)},skipNulls:!1,strictNullHandling:!1},c=function t(e,i,o,n,a,l,c,s,d,u,f,p){var b=e;if("function"==typeof c)b=c(i,b);else if(b instanceof Date)b=u(b);else if(null===b){if(n)return l&&!p?l(i):i;b=""}if("string"==typeof b||"number"==typeof b||"boolean"==typeof b||r.isBuffer(b)){if(l){var h=p?i:l(i);return[f(h)+"="+f(l(b))]}return[f(i)+"="+f(String(b))]}var m=[];if("undefined"==typeof b)return m;var y;if(Array.isArray(c))y=c;else{var v=Object.keys(b);y=s?v.sort(s):v}for(var g=0;g<y.length;++g){var w=y[g];a&&null===b[w]||(m=Array.isArray(b)?m.concat(t(b[w],o(i,w),o,n,a,l,c,s,d,u,f,p)):m.concat(t(b[w],i+(d?"."+w:"["+w+"]"),o,n,a,l,c,s,d,u,f,p)))}return m};t.exports=function(t,e){var i=t,r=e||{};if(null!==r.encoder&&void 0!==r.encoder&&"function"!=typeof r.encoder)throw new TypeError("Encoder has to be a function.");var a="undefined"==typeof r.delimiter?l.delimiter:r.delimiter,s="boolean"==typeof r.strictNullHandling?r.strictNullHandling:l.strictNullHandling,d="boolean"==typeof r.skipNulls?r.skipNulls:l.skipNulls,u="boolean"==typeof r.encode?r.encode:l.encode,f="function"==typeof r.encoder?r.encoder:l.encoder,p="function"==typeof r.sort?r.sort:null,b="undefined"!=typeof r.allowDots&&r.allowDots,h="function"==typeof r.serializeDate?r.serializeDate:l.serializeDate,m="boolean"==typeof r.encodeValuesOnly?r.encodeValuesOnly:l.encodeValuesOnly;if("undefined"==typeof r.format)r.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,r.format))throw new TypeError("Unknown format option provided.");var y,v,g=o.formatters[r.format];"function"==typeof r.filter?(v=r.filter,i=v("",i)):Array.isArray(r.filter)&&(v=r.filter,y=v);var w=[];if("object"!=typeof i||null===i)return"";var C;C=r.arrayFormat in n?r.arrayFormat:"indices"in r?r.indices?"indices":"repeat":"indices";var O=n[C];y||(y=Object.keys(i)),p&&y.sort(p);for(var j=0;j<y.length;++j){var k=y[j];d&&null===i[k]||(w=w.concat(c(i[k],k,O,s,d,u?f:null,v,p,b,h,g,m)))}return w.join(a)}},475:function(t,e){"use strict";var i=Object.prototype.hasOwnProperty,r=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}();e.arrayToObject=function(t,e){for(var i=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)"undefined"!=typeof t[r]&&(i[r]=t[r]);return i},e.merge=function(t,r,o){if(!r)return t;if("object"!=typeof r){if(Array.isArray(t))t.push(r);else{if("object"!=typeof t)return[t,r];(o.plainObjects||o.allowPrototypes||!i.call(Object.prototype,r))&&(t[r]=!0)}return t}if("object"!=typeof t)return[t].concat(r);var n=t;return Array.isArray(t)&&!Array.isArray(r)&&(n=e.arrayToObject(t,o)),Array.isArray(t)&&Array.isArray(r)?(r.forEach(function(r,n){i.call(t,n)?t[n]&&"object"==typeof t[n]?t[n]=e.merge(t[n],r,o):t.push(r):t[n]=r}),t):Object.keys(r).reduce(function(t,i){var n=r[i];return Object.prototype.hasOwnProperty.call(t,i)?t[i]=e.merge(t[i],n,o):t[i]=n,t},n)},e.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},e.encode=function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),i="",o=0;o<e.length;++o){var n=e.charCodeAt(o);45===n||46===n||95===n||126===n||n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122?i+=e.charAt(o):n<128?i+=r[n]:n<2048?i+=r[192|n>>6]+r[128|63&n]:n<55296||n>=57344?i+=r[224|n>>12]+r[128|n>>6&63]+r[128|63&n]:(o+=1,n=65536+((1023&n)<<10|1023&e.charCodeAt(o)),i+=r[240|n>>18]+r[128|n>>12&63]+r[128|n>>6&63]+r[128|63&n])}return i},e.compact=function(t,i){if("object"!=typeof t||null===t)return t;var r=i||[],o=r.indexOf(t);if(o!==-1)return r[o];if(r.push(t),Array.isArray(t)){for(var n=[],a=0;a<t.length;++a)t[a]&&"object"==typeof t[a]?n.push(e.compact(t[a],r)):"undefined"!=typeof t[a]&&n.push(t[a]);return n}var l=Object.keys(t);return l.forEach(function(i){t[i]=e.compact(t[i],r)}),t},e.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},e.isBuffer=function(t){return null!==t&&"undefined"!=typeof t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}},476:function(t,e){"use strict";var i=String.prototype.replace,r=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return i.call(t,r,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},477:function(t,e,i){"use strict";var r=i(475),o=Object.prototype.hasOwnProperty,n={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},a=function(t,e){for(var i={},r=t.split(e.delimiter,e.parameterLimit===1/0?void 0:e.parameterLimit),n=0;n<r.length;++n){var a,l,c=r[n],s=c.indexOf("]=")===-1?c.indexOf("="):c.indexOf("]=")+1;s===-1?(a=e.decoder(c),l=e.strictNullHandling?null:""):(a=e.decoder(c.slice(0,s)),l=e.decoder(c.slice(s+1))),o.call(i,a)?i[a]=[].concat(i[a]).concat(l):i[a]=l}return i},l=function(t,e,i){if(!t.length)return e;var r,o=t.shift();if("[]"===o)r=[],r=r.concat(l(t,e,i));else{r=i.plainObjects?Object.create(null):{};var n="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,a=parseInt(n,10);!isNaN(a)&&o!==n&&String(a)===n&&a>=0&&i.parseArrays&&a<=i.arrayLimit?(r=[],r[a]=l(t,e,i)):r[n]=l(t,e,i)}return r},c=function(t,e,i){if(t){var r=i.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,n=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,c=n.exec(r),s=c?r.slice(0,c.index):r,d=[];if(s){if(!i.plainObjects&&o.call(Object.prototype,s)&&!i.allowPrototypes)return;d.push(s)}for(var u=0;null!==(c=a.exec(r))&&u<i.depth;){if(u+=1,!i.plainObjects&&o.call(Object.prototype,c[1].slice(1,-1))&&!i.allowPrototypes)return;d.push(c[1])}return c&&d.push("["+r.slice(c.index)+"]"),l(d,e,i)}};t.exports=function(t,e){var i=e||{};if(null!==i.decoder&&void 0!==i.decoder&&"function"!=typeof i.decoder)throw new TypeError("Decoder has to be a function.");if(i.delimiter="string"==typeof i.delimiter||r.isRegExp(i.delimiter)?i.delimiter:n.delimiter,i.depth="number"==typeof i.depth?i.depth:n.depth,i.arrayLimit="number"==typeof i.arrayLimit?i.arrayLimit:n.arrayLimit,i.parseArrays=i.parseArrays!==!1,i.decoder="function"==typeof i.decoder?i.decoder:n.decoder,i.allowDots="boolean"==typeof i.allowDots?i.allowDots:n.allowDots,i.plainObjects="boolean"==typeof i.plainObjects?i.plainObjects:n.plainObjects,i.allowPrototypes="boolean"==typeof i.allowPrototypes?i.allowPrototypes:n.allowPrototypes,i.parameterLimit="number"==typeof i.parameterLimit?i.parameterLimit:n.parameterLimit,i.strictNullHandling="boolean"==typeof i.strictNullHandling?i.strictNullHandling:n.strictNullHandling,""===t||null===t||"undefined"==typeof t)return i.plainObjects?Object.create(null):{};for(var o="string"==typeof t?a(t,i):t,l=i.plainObjects?Object.create(null):{},s=Object.keys(o),d=0;d<s.length;++d){var u=s[d],f=c(u,o[u],i);l=r.merge(l,f,i)}return r.compact(l)}},478:function(t,e){t.exports=' <div class=layout-header _v-b17b42d4=""></div> <div class=layout-breadcrumb _v-b17b42d4=""> <breadcrumb _v-b17b42d4=""> <breadcrumb-item _v-b17b42d4="">首页</breadcrumb-item> <breadcrumb-item _v-b17b42d4="">标签管理</breadcrumb-item> <breadcrumb-item _v-b17b42d4="">分类标签列表</breadcrumb-item> </breadcrumb> </div> <div class=layout-content _v-b17b42d4=""> <div class=layout-content-main _v-b17b42d4=""> <div class=resource-update _v-b17b42d4=""> <div class=update-btn _v-b17b42d4=""> <i-button type=primary icon=plus @click=newCategory _v-b17b42d4="">添加分类</i-button> <i-button type=ghost @click=toggleTreeGrid _v-b17b42d4="">{{toggle.name}}</i-button> </div> </div> <div class=resource-search _v-b17b42d4=""> <div class=normal-search _v-b17b42d4=""> <row _v-b17b42d4=""> <i-col span=12 _v-b17b42d4=""> <div class=high-btn _v-b17b42d4=""> </div> </i-col> </row> </div> </div> <i-table style=max-width:1490px border="" size=small stripe="" :columns=tableColumns :data=treedata _v-b17b42d4=""></i-table> </div> </div> <modal :visible.sync=basicModel.show :title.sync=basicModel.title _v-b17b42d4=""> <i-form v-ref:form-custom="" :model=formCustom :rules=ruleCustom :label-width=80 _v-b17b42d4=""> <form-item label=名称： prop=title _v-b17b42d4=""> <i-input type=text :value.sync=formCustom.title _v-b17b42d4=""></i-input> </form-item> </i-form> <div slot=footer _v-b17b42d4=""> <i-button type=ghost @click="basicModel.show=false" _v-b17b42d4="">取消</i-button> <i-button type=primary @click="saveCateogry(\'formCustom\');" _v-b17b42d4="">确定</i-button> </div> </modal> '}});