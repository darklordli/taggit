webpackJsonp([5],{473:function(e,t,r){"use strict";var i=r(474),a=r(477),o=r(476);e.exports={formats:o,parse:a,stringify:i}},474:function(e,t,r){"use strict";var i=r(475),a=r(476),o={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},n=Date.prototype.toISOString,l={delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,serializeDate:function(e){return n.call(e)},skipNulls:!1,strictNullHandling:!1},s=function e(t,r,a,o,n,l,s,d,c,u,p,f){var m=t;if("function"==typeof s)m=s(r,m);else if(m instanceof Date)m=u(m);else if(null===m){if(o)return l&&!f?l(r):r;m=""}if("string"==typeof m||"number"==typeof m||"boolean"==typeof m||i.isBuffer(m)){if(l){var y=f?r:l(r);return[p(y)+"="+p(l(m))]}return[p(r)+"="+p(String(m))]}var v=[];if("undefined"==typeof m)return v;var h;if(Array.isArray(s))h=s;else{var g=Object.keys(m);h=d?g.sort(d):g}for(var b=0;b<h.length;++b){var _=h[b];n&&null===m[_]||(v=Array.isArray(m)?v.concat(e(m[_],a(r,_),a,o,n,l,s,d,c,u,p,f)):v.concat(e(m[_],r+(c?"."+_:"["+_+"]"),a,o,n,l,s,d,c,u,p,f)))}return v};e.exports=function(e,t){var r=e,i=t||{};if(null!==i.encoder&&void 0!==i.encoder&&"function"!=typeof i.encoder)throw new TypeError("Encoder has to be a function.");var n="undefined"==typeof i.delimiter?l.delimiter:i.delimiter,d="boolean"==typeof i.strictNullHandling?i.strictNullHandling:l.strictNullHandling,c="boolean"==typeof i.skipNulls?i.skipNulls:l.skipNulls,u="boolean"==typeof i.encode?i.encode:l.encode,p="function"==typeof i.encoder?i.encoder:l.encoder,f="function"==typeof i.sort?i.sort:null,m="undefined"!=typeof i.allowDots&&i.allowDots,y="function"==typeof i.serializeDate?i.serializeDate:l.serializeDate,v="boolean"==typeof i.encodeValuesOnly?i.encodeValuesOnly:l.encodeValuesOnly;if("undefined"==typeof i.format)i.format=a.default;else if(!Object.prototype.hasOwnProperty.call(a.formatters,i.format))throw new TypeError("Unknown format option provided.");var h,g,b=a.formatters[i.format];"function"==typeof i.filter?(g=i.filter,r=g("",r)):Array.isArray(i.filter)&&(g=i.filter,h=g);var _=[];if("object"!=typeof r||null===r)return"";var w;w=i.arrayFormat in o?i.arrayFormat:"indices"in i?i.indices?"indices":"repeat":"indices";var j=o[w];h||(h=Object.keys(r)),f&&h.sort(f);for(var O=0;O<h.length;++O){var x=h[O];c&&null===r[x]||(_=_.concat(s(r[x],x,j,d,c,u?p:null,g,f,m,y,b,v)))}return _.join(n)}},475:function(e,t){"use strict";var r=Object.prototype.hasOwnProperty,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}();t.arrayToObject=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},i=0;i<e.length;++i)"undefined"!=typeof e[i]&&(r[i]=e[i]);return r},t.merge=function(e,i,a){if(!i)return e;if("object"!=typeof i){if(Array.isArray(e))e.push(i);else{if("object"!=typeof e)return[e,i];(a.plainObjects||a.allowPrototypes||!r.call(Object.prototype,i))&&(e[i]=!0)}return e}if("object"!=typeof e)return[e].concat(i);var o=e;return Array.isArray(e)&&!Array.isArray(i)&&(o=t.arrayToObject(e,a)),Array.isArray(e)&&Array.isArray(i)?(i.forEach(function(i,o){r.call(e,o)?e[o]&&"object"==typeof e[o]?e[o]=t.merge(e[o],i,a):e.push(i):e[o]=i}),e):Object.keys(i).reduce(function(e,r){var o=i[r];return Object.prototype.hasOwnProperty.call(e,r)?e[r]=t.merge(e[r],o,a):e[r]=o,e},o)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),r="",a=0;a<t.length;++a){var o=t.charCodeAt(a);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?r+=t.charAt(a):o<128?r+=i[o]:o<2048?r+=i[192|o>>6]+i[128|63&o]:o<55296||o>=57344?r+=i[224|o>>12]+i[128|o>>6&63]+i[128|63&o]:(a+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(a)),r+=i[240|o>>18]+i[128|o>>12&63]+i[128|o>>6&63]+i[128|63&o])}return r},t.compact=function(e,r){if("object"!=typeof e||null===e)return e;var i=r||[],a=i.indexOf(e);if(a!==-1)return i[a];if(i.push(e),Array.isArray(e)){for(var o=[],n=0;n<e.length;++n)e[n]&&"object"==typeof e[n]?o.push(t.compact(e[n],i)):"undefined"!=typeof e[n]&&o.push(e[n]);return o}var l=Object.keys(e);return l.forEach(function(r){e[r]=t.compact(e[r],i)}),e},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!==e&&"undefined"!=typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},476:function(e,t){"use strict";var r=String.prototype.replace,i=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return r.call(e,i,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},477:function(e,t,r){"use strict";var i=r(475),a=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:i.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},n=function(e,t){for(var r={},i=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),o=0;o<i.length;++o){var n,l,s=i[o],d=s.indexOf("]=")===-1?s.indexOf("="):s.indexOf("]=")+1;d===-1?(n=t.decoder(s),l=t.strictNullHandling?null:""):(n=t.decoder(s.slice(0,d)),l=t.decoder(s.slice(d+1))),a.call(r,n)?r[n]=[].concat(r[n]).concat(l):r[n]=l}return r},l=function(e,t,r){if(!e.length)return t;var i,a=e.shift();if("[]"===a)i=[],i=i.concat(l(e,t,r));else{i=r.plainObjects?Object.create(null):{};var o="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,n=parseInt(o,10);!isNaN(n)&&a!==o&&String(n)===o&&n>=0&&r.parseArrays&&n<=r.arrayLimit?(i=[],i[n]=l(e,t,r)):i[o]=l(e,t,r)}return i},s=function(e,t,r){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,n=/(\[[^[\]]*])/g,s=o.exec(i),d=s?i.slice(0,s.index):i,c=[];if(d){if(!r.plainObjects&&a.call(Object.prototype,d)&&!r.allowPrototypes)return;c.push(d)}for(var u=0;null!==(s=n.exec(i))&&u<r.depth;){if(u+=1,!r.plainObjects&&a.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(s[1])}return s&&c.push("["+i.slice(s.index)+"]"),l(c,t,r)}};e.exports=function(e,t){var r=t||{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.delimiter="string"==typeof r.delimiter||i.isRegExp(r.delimiter)?r.delimiter:o.delimiter,r.depth="number"==typeof r.depth?r.depth:o.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:o.arrayLimit,r.parseArrays=r.parseArrays!==!1,r.decoder="function"==typeof r.decoder?r.decoder:o.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:o.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:o.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:o.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:o.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:o.strictNullHandling,""===e||null===e||"undefined"==typeof e)return r.plainObjects?Object.create(null):{};for(var a="string"==typeof e?n(e,r):e,l=r.plainObjects?Object.create(null):{},d=Object.keys(a),c=0;c<d.length;++c){var u=d[c],p=s(u,a[u],r);l=i.merge(l,p,r)}return i.compact(l)}},490:function(e,t,r){var i,a;r(491),i=r(492),a=r(493),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports.default),a&&(("function"==typeof e.exports?e.exports.options:e.exports).template=a)},491:function(e,t){},492:function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(6),o=i(a),n=r(9),l=(i(n),r(11)),s=i(l),d=r(473),c=i(d);t.default={data:function(){return{id:0,newId:0,upName:"小",upSzie:"140*140",largeImg:{name:"",visible:!1},formValidate:{pid:"",pname:"",name:"",nickname:null,type:"",img_large:"",img_small:"",editor:"",editor_email:""},typelist:s.default.albumTypeList,ruleValidate:{name:[{required:!0,message:"专辑名不能为空",trigger:"blur"}],type:[{required:!0,message:"请选择专辑类型",trigger:"change"}]}}},computed:{uploadList:function(){return this.$refs.upload?this.$refs.upload.fileList:[]}},ready:function(){return this.formValidate.editor=s.default.getCurrentEditor()[0],this.formValidate.editor_email=s.default.getCurrentEditor()[1],0==this.id||this.$route.query.p?void(this.$route.query.p&&(this.formValidate.name="",this.formValidate.pid=this.id,this.formValidate.pname=this.$route.query.p)):void this.loadData()},methods:{loadData:function(){var e=this;s.default.ajax({method:"GET",url:s.default.getUrl("/album/"+this.id)}).then(function(t){var r=t.data.data;r.nickname=r.nickname.join(","),e.formValidate={pid:r.pid,pname:r.pname,name:r.name,nickname:r.nickname,type:r.type,img_large:r.img_large,img_small:r.img_small}}).catch(function(e){console.log(e)})},tonext:function(e,t){this.addCategory(e,t)},addCategory:function(e,t){var r=this,i=[];this.formValidate.nickname&&(i=this.formValidate.nickname.split(",")),this.formValidate.nickname=i;var a={json:(0,o.default)(this.formValidate)},n="",l=this;n=0==this.id?"/album/new":"/album/"+this.id,this.$route.query.p&&(n="/album/new"),console.log("post url:"+n),this.$refs[e].validate(function(e){e?(r.$Message.success("提交成功!"),s.default.ajax({method:"post",url:s.default.getUrl(n),data:c.default.stringify(a)}).then(function(e){var i=e.data;0==i.result?(r.$Message.success(i.msg),r.newId=i.data.id,"ok"==t?l.$router.go({name:"categorylist"}):"next"==t&&setTimeout(function(){l.$router.go({name:"newliststep3",params:{listid:i.data.id}})},1e3)):r.$Message.warning(i.desc)}).catch(function(e){console.log(e)})):r.$Message.error("表单验证失败!")})},handleView:function(e){this.largeImg.name=e,this.largeImg.visible=!0},goback:function(){this.$router.go({name:"categorylist"})},handleRemove:function(e){var t=this.$refs.upload.fileList;this.upName="大",this.upSzie="750*640",1==t.length?(this.upName="小",this.upSzie="140*140",this.formValidate.img_small=""):this.formValidate.img_large="",this.$refs.upload.fileList.splice(t.indexOf(e),1)},handleSuccess:function(e,t){console.log(t),t.url=e.data[0],t.name=e.data[0];var r=this.$refs.upload.fileList;this.upName="大",this.upSzie="750*640",2==r.length?(this.upName="",this.upSzie="",this.formValidate.img_large=e.data[0]):this.formValidate.img_small=e.data[0]},handleFormatError:function(e){this.$Notice.warning({title:"文件格式不正确",desc:"文件 "+e.name+" 格式不正确，请上传 jpg 或 png 格式的图片。"})},handleMaxSize:function(e){this.$Notice.warning({title:"超出文件大小限制",desc:"文件 "+e.name+" 太大，不能超过 2M。"})},handleBeforeUpload:function(){var e=this.uploadList.length<2;return e||this.$Notice.warning({title:"只能传二张图。"}),e}},route:{data:function(e){this.id=e.to.params.listid,e.next()}}}},493:function(e,t){e.exports=' <div class=layout-breadcrumb _v-3a7d2015=""> <breadcrumb _v-3a7d2015=""> <breadcrumb-item _v-3a7d2015="">首页</breadcrumb-item> <breadcrumb-item _v-3a7d2015="">歌单管理</breadcrumb-item> <breadcrumb-item _v-3a7d2015="">新建专辑</breadcrumb-item> </breadcrumb> </div> <div class=layout-content _v-3a7d2015=""> <div class=layout-content-main _v-3a7d2015=""> <row _v-3a7d2015=""> <steps :current=0 _v-3a7d2015=""> <step title=新建专辑 content=专辑内容编辑.. _v-3a7d2015=""></step> <step title=添加资源 content=歌单内容编辑.. _v-3a7d2015=""></step> <step title=资源整理 content=整理已添加的资源.. _v-3a7d2015=""></step> </steps> </row> <div class=div-split _v-3a7d2015="">&nbsp;</div> <row _v-3a7d2015=""> <i-col span=12 _v-3a7d2015=""> <i-form v-ref:form-validate="" :model=formValidate :rules=ruleValidate :label-width=120 _v-3a7d2015=""> <form-item label=(父)专辑： _v-3a7d2015=""> <i-input :value.sync=formValidate.pname disabled="" placeholder=请输入专辑名称.. _v-3a7d2015=""></i-input> </form-item> <form-item label=专辑名称： prop=name _v-3a7d2015=""> <i-input :value.sync=formValidate.name placeholder=请输入子专辑名称.. _v-3a7d2015=""></i-input> </form-item> <form-item label=规约词： _v-3a7d2015=""> <i-input :value.sync=formValidate.nickname placeholder=请输入规约词(词与词之间请用半角逗号分隔).. _v-3a7d2015=""></i-input> </form-item> <form-item label=专辑类型： prop=type _v-3a7d2015=""> <i-select :model.sync=formValidate.type _v-3a7d2015=""> <i-option v-for="item in typelist" :value=item.value _v-3a7d2015="">{{ item.label }}</i-option> </i-select> </form-item> <form-item label=添加封面： _v-3a7d2015=""> <div class=demo-upload-list v-for="item in uploadList" _v-3a7d2015=""> <template v-if="item.status === \'finished\'" _v-3a7d2015=""> <img :src=item.url _v-3a7d2015=""> <div class=demo-upload-list-cover _v-3a7d2015=""> <icon type=ios-eye-outline @click=handleView(item.name) _v-3a7d2015=""></icon> <icon type=ios-trash-outline @click=handleRemove(item) _v-3a7d2015=""></icon> </div> </template> <template v-else="" _v-3a7d2015=""> <progress v-if=item.showProgress :percent=item.percentage hide-info="" _v-3a7d2015=""></progress> </template> </div> <upload v-ref:upload="" :show-upload-list=false :on-success=handleSuccess :format="[\'jpg\',\'jpeg\',\'png\']" :max-size=2048 :on-format-error=handleFormatError :on-exceeded-size=handleMaxSize :before-upload=handleBeforeUpload type=drag action=http://xyzdev.resourcebr.roobo.com/fileinput style="display: inline-block;width:100px;vertical-align: top" _v-3a7d2015=""> <div style=height:100px;width:100px;padding-top:20% _v-3a7d2015=""> <icon type=camera size=20 _v-3a7d2015=""></icon> <p _v-3a7d2015="">上传{{upName}}封面</p> <p style=margin-top:-15px _v-3a7d2015="">{{upSzie}}</p> </div> </upload> <modal title=查看图片 :visible.sync=largeImg.visible _v-3a7d2015=""> <img :src=largeImg.name v-if=largeImg.visible style=width:100% _v-3a7d2015=""> </modal> </form-item> <form-item _v-3a7d2015=""> <i-button type=primary @click="addCategory(\'formValidate\', \'ok\')" _v-3a7d2015="">完成</i-button>&nbsp;&nbsp; <i-button type=primary @click="tonext(\'formValidate\', \'next\')" _v-3a7d2015="">下一步</i-button> </form-item>` </i-form> </i-col> </row> </div> </div> '}});