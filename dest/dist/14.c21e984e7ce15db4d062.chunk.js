webpackJsonp([14],{561:function(e,t,a){var i,r;a(562),i=a(563),r=a(564),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports.default),r&&(("function"==typeof e.exports?e.exports.options:e.exports).template=r)},562:function(e,t){},563:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(6),o=i(r),s=a(11),l=i(s),n=a(9);i(n);t.default={name:"resouredetail",data:function(){return{logininfo:"",resouredata:{userinfo:""},detailtreedata:[],showtreedata:[],detailtaglist:[],taglist:[],classifylist:[],classifylistdisabled:[],taglistdisabled:[],verifytreedata:[],verifydata:{clevel:"",check_info:"",userinfo:{reviewer:"",reviewer_email:""}},classspinShow:!0,tagsspinShow:!0}},computed:{editdisable:function(){if(5===this.resouredata.clevel||3===this.resouredata.clevel||4===this.resouredata.clevel)return!0},clevel:function(){return l.default.getResouceStatus(this.resouredata.clevel)},id:function(){return this.$route.params.id},dataformat:function(){return l.default.dataformat(this.resouredata.userinfo.edited_at)}},ready:function(){this.getlogininfo(),this.getresoure()},methods:{getlogininfo:function(){this.logininfo=l.default.getCookie("CURRENT_USER"),this.logininfo=JSON.parse(JSON.parse(this.logininfo))},getresoure:function(){var e=this,t="/airesources/"+this.$route.params.id+"?tags=1&userinfo=1&tagnew=1&tagtree=1";l.default.ajax({method:"GET",url:l.default.getUrl(t)}).then(function(t){e.resouredata=t.data.data,e.resouredata.length=l.default.formatSeconds(e.resouredata.length),e.resouredata.size=l.default.formatFileSize(e.resouredata.size),e.resouredata.keywords=e.resouredata.keywords.join(","),e.edittree(),e.getclasslist()}).catch(function(e){console.error(e)})},edittree:function(){this.showtreedata.push(this.resouredata.tagtree),this.taglist=l.default.gettaglist(this.showtreedata),this.tagsspinShow=!1},getclasslist:function(){var e=this,t={appId:"",id:0,type:0};l.default.ajax({method:"POST",url:l.default.getUrl("/tag/list"),data:t}).then(function(t){e.classifylist=t.data.data.children,l.default.checkclass(e.classifylist,e.resouredata.tagnewIds),e.classspinShow=!1})},verifysuc:function(){this.verifydata.clevel=4,this.tosendverify()},verifyfail:function(){this.verifydata.clevel=2,this.tosendverify()},tosendverify:function(){var e=this;this.verifydata.userinfo.reviewer=this.logininfo.loginName,this.verifydata.userinfo.reviewer_email=this.logininfo.email;var t=new FormData;t.append("json",(0,o.default)(this.verifydata));var a="/airesources/"+this.$route.params.id;l.default.ajax({method:"POST",url:l.default.getUrl(a),data:t}).then(function(t){l.default.tip(t),e.getresoure()}).catch(function(e){console.error(e)})}}}},564:function(e,t){e.exports=' <div class=layout-header></div> <div class=layout-breadcrumb> <breadcrumb> <breadcrumb-item>首页</breadcrumb-item> <breadcrumb-item>音频资源管理</breadcrumb-item> <breadcrumb-item>审核资源</breadcrumb-item> </breadcrumb> </div> <div class=layout-content> <div class=layout-content-main> <card style=height:380px> <p slot=title style=height:35px> <icon type=ios-paper></icon> 基本信息 ( id: <tag color=blue>{{resouredata.id}}</tag> ) <tag type=dot color=yellow>{{{clevel}}}</tag> </p> <p slot=extra> 操作人：<span>{{resouredata.userinfo.editor}} ({{resouredata.userinfo.reviewer_email}})</span>， 操作时间：<span>{{dataformat}}</span> </p> <i-col span=12> <i-form :label-width=120> <form-item label=资源名称：> {{resouredata.name}} </form-item> <form-item label=作者/歌手：> {{resouredata.artist}} </form-item> <form-item label=类型：> {{resouredata.type}} </form-item> <form-item label=时长：> {{resouredata.length}} </form-item> <form-item label=音频：> <audio :src=resouredata.content controls=controls> </audio> </form-item> </i-form> </i-col> <i-col span=12> <i-form :label-width=120> <form-item label=别名：> {{resouredata.nickname}} </form-item> <form-item label=来源：> {{resouredata.srcname}} </form-item> <form-item label=大小：> {{resouredata.size}} </form-item> </i-form> </i-col> </card> <card> <p slot=title><icon type=ios-paper></icon>关键词列表</p> <i-form :label-width=120> <form-item label=预制关键词：> {{resouredata.keywords}} </form-item> </i-form> </card> <card> <p slot=title> <icon type=ios-paper></icon>分类/标签列表 </p> <card class="classwrapper cf"> <p slot=title>分类</p> <tree :data=classifylist show-checkbox> </tree> <spin size=large fix v-if=classspinShow></spin> </card> <card class=tagwrapper> <p slot=title>标签</p> <template v-for="item in taglist"> <tag type=border color=blue>{{item.title}}</tag> <card class=cf> <spin size=large v-if=tagsspinShow></spin> <tree :data=item.children show-checkbox> </tree> </card> </template> </card> </card> <div class=wrapper_editor> <icon type=person></icon> 操作人： <span>{{resouredata.userinfo.editor}} (<icon type=email></icon> {{resouredata.userinfo.editor_email}}) </span>， <icon type=clock></icon> 操作时间： <span>{{dataformat}}</span> </div> <p class=error_wrapper> <icon type=android-close></icon> 不合格原因： <i-input type=textarea style=width:500px :value.sync=verifydata.check_info :autosize=true placeholder=请输入...> </i-input> </p> <div class=wrapper_editor> <icon type=person></icon> 审核人： <span>{{resouredata.userinfo.reviewer}} (<icon type=email></icon> {{resouredata.userinfo.reviewer_email}}) </span> <icon type=clock></icon> 审核时间： <span>{{resouredata.userinfo.reviewed_at}}</span> </div> <div class=btn_wrapper> <i-button type=success size=large icon=thumbsup :disabled="!verifydata.check_info == \'\'" v-on:click.stop.prevent=verifysuc()> 审核通过 </i-button> <i-button type=error icon=thumbsdown size=large :disabled=!verifydata.check_info v-on:click.stop.prevent=verifyfail()> 审核未通过 </i-button> </div> </div> </div> '}});