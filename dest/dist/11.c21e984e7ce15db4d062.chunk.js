webpackJsonp([11],{549:function(t,e,a){var i,n;a(550),i=a(551),n=a(552),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports.default),n&&(("function"==typeof t.exports?t.exports.options:t.exports).template=n)},550:function(t,e){},551:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(6),o=i(n),l=a(9),r=(i(l),a(11)),s=i(r);e.default={data:function(){return{selectedfiles:[],tabledata:[],selectData:null,nickname:[],type:[],names:[],uploadtable:[{title:"资源名称",key:"name",render:function(t,e,a){return'<i-input :value.sync="names['+a+']"></i-input>'}},{title:"文件名称",key:"name",align:"center"},{title:"大小",key:"size",align:"center",render:function(t,e,a){var i=s.default.formatFileSize(t.size);return i}},{title:"别名",key:"nickname",align:"center",render:function(t,e,a){return'<i-input :value.sync="nickname['+a+']"></i-input>'}},{title:"分类",key:"type",align:"center",render:function(t,e,a){return'<i-select :model.sync="type['+a+']">\n                          <i-option value="music">音乐</i-option>\n                          <i-option value="song">儿歌</i-option>\n                        </i-select>'}},{title:"状态",key:"status",align:"center",width:150,render:function(t,e,a){var i=s.default.getUploadStatus(t.status);return i}},{title:"操作",key:"action",width:150,align:"center",render:function(t,e,a){return'<i-button type="error" icon="trash-a"\n                        @click="removeItem('+a+')">删除</i-button>'}}]}},ready:function(){this.getSongInfo()},methods:{choosefiles:function(){this.tabledata=[];for(var t=document.getElementById("choosebtn").files,e=0;e<t.length;e++){var a={name:t[e].name,size:t[e].size,lastModified:t[e].lastModified,webkitRelativePath:t[e].webkitRelativePath,status:-1,nickname:"",type:"music"};this.tabledata.push(a),this.type.push("music")}},getSongInfo:function(){},selectChange:function(t){this.selectData=t},removeItem:function(t){this.tabledata.splice(t,1),this.nickname.splice(t,1),this.type.splice(t,1)},createdFinish:function(){var t=this;console.log(this.type);for(var e=new FormData(document.getElementById("uploadform")),a=document.getElementById("choosebtn").files,i=0;i<a.length;i++)e.append("file"+i,a[i]);for(var n=0;n<this.tabledata.length;n++)this.tabledata[n].name=this.names[n],this.tabledata[n].nickname=this.nickname[n],this.tabledata[n].type=this.type[n],this.tabledata[n].userinfo={editor:s.default.getCurrentEditor()[0],editor_email:s.default.getCurrentEditor()[1]};e.append("json",(0,o.default)(this.tabledata)),this.$Loading.start(),s.default.ajax({method:"POST",url:s.default.getUrl("/airesources"),data:e}).then(function(e){t.$Loading.finish();var a=e.data.data.failed;t.updateUploadState(a),t.info("上传完成!")}).catch(function(t){console.error(t)})},updateUploadState:function(t){for(var e=0;e<this.tabledata.length;e++)if(this.tabledata[e].status=1,t)for(var a=0;a<t.length;a++)this.tabledata[e].name===t[a]&&(this.tabledata[e].status=0)},saveItemEdit:function(t){},info:function(t){this.$Notice.info({title:t,desc:""})},importInfo:function(){}}}},552:function(t,e){t.exports=' <div class=layout-header _v-52927462=""> </div> <div class=layout-breadcrumb _v-52927462=""> <breadcrumb _v-52927462=""> <breadcrumb-item _v-52927462="">首页</breadcrumb-item> <breadcrumb-item _v-52927462="">音频资源管理</breadcrumb-item> <breadcrumb-item _v-52927462="">上传音频资源</breadcrumb-item> </breadcrumb> </div> <div class=layout-content _v-52927462=""> <div class=layout-content-main _v-52927462=""> <i-form id=uploadform enctype=multipart/form-data _v-52927462=""> <input type=file class=ivu-upload-input v-on:change.stop.prevent=choosefiles() id=choosebtn accept="audio/basic,\n        audio/mid,audio/mpeg,\n        audio/x-pn-realaudio,\n        audio/x-wav,\n        audio/x-pn-realaudio\n        audio/x-mpegurl" multiple="" _v-52927462=""> </i-form> <div class=main-table _v-52927462=""> <i-table :content=self :columns=uploadtable :data=tabledata @on-selection-change=selectChange _v-52927462=""> </i-table> </div> <div class=btn-box _v-52927462=""> <i-button type=primary @click.stop.prevent=createdFinish() _v-52927462="">保存</i-button> </div> </div> </div> '}});