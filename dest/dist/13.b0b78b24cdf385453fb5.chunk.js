webpackJsonp([13],{473:function(e,t,i){"use strict";var r=i(474),a=i(477),o=i(476);e.exports={formats:o,parse:a,stringify:r}},474:function(e,t,i){"use strict";var r=i(475),a=i(476),o={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},n=Date.prototype.toISOString,s={delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(e){return n.call(e)},skipNulls:!1,strictNullHandling:!1},l=function e(t,i,a,o,n,s,l,c,u,d,p,f){var h=t;if("function"==typeof l)h=l(i,h);else if(h instanceof Date)h=d(h);else if(null===h){if(o)return s&&!f?s(i):i;h=""}if("string"==typeof h||"number"==typeof h||"boolean"==typeof h||r.isBuffer(h)){if(s){var m=f?i:s(i);return[p(m)+"="+p(s(h))]}return[p(i)+"="+p(String(h))]}var v=[];if("undefined"==typeof h)return v;var y;if(Array.isArray(l))y=l;else{var g=Object.keys(h);y=c?g.sort(c):g}for(var b=0;b<y.length;++b){var w=y[b];n&&null===h[w]||(v=Array.isArray(h)?v.concat(e(h[w],a(i,w),a,o,n,s,l,c,u,d,p,f)):v.concat(e(h[w],i+(u?"."+w:"["+w+"]"),a,o,n,s,l,c,u,d,p,f)))}return v};e.exports=function(e,t){var i=e,r=t||{};if(null!==r.encoder&&void 0!==r.encoder&&"function"!=typeof r.encoder)throw new TypeError("Encoder has to be a function.");var n="undefined"==typeof r.delimiter?s.delimiter:r.delimiter,c="boolean"==typeof r.strictNullHandling?r.strictNullHandling:s.strictNullHandling,u="boolean"==typeof r.skipNulls?r.skipNulls:s.skipNulls,d="boolean"==typeof r.encode?r.encode:s.encode,p="function"==typeof r.encoder?r.encoder:s.encoder,f="function"==typeof r.sort?r.sort:null,h="undefined"!=typeof r.allowDots&&r.allowDots,m="function"==typeof r.serializeDate?r.serializeDate:s.serializeDate,v="boolean"==typeof r.encodeValuesOnly?r.encodeValuesOnly:s.encodeValuesOnly;if("undefined"==typeof r.format)r.format=a.default;else if(!Object.prototype.hasOwnProperty.call(a.formatters,r.format))throw new TypeError("Unknown format option provided.");var y,g,b=a.formatters[r.format];"function"==typeof r.filter?(g=r.filter,i=g("",i)):Array.isArray(r.filter)&&(g=r.filter,y=g);var w=[];if("object"!=typeof i||null===i)return"";var _;_=r.arrayFormat in o?r.arrayFormat:"indices"in r?r.indices?"indices":"repeat":"indices";var x=o[_];y||(y=Object.keys(i)),f&&y.sort(f);for(var j=0;j<y.length;++j){var k=y[j];u&&null===i[k]||(w=w.concat(l(i[k],k,x,c,u,d?p:null,g,f,h,m,b,v)))}return w.join(n)}},475:function(e,t){"use strict";var i=Object.prototype.hasOwnProperty,r=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}();t.arrayToObject=function(e,t){for(var i=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)"undefined"!=typeof e[r]&&(i[r]=e[r]);return i},t.merge=function(e,r,a){if(!r)return e;if("object"!=typeof r){if(Array.isArray(e))e.push(r);else{if("object"!=typeof e)return[e,r];(a.plainObjects||a.allowPrototypes||!i.call(Object.prototype,r))&&(e[r]=!0)}return e}if("object"!=typeof e)return[e].concat(r);var o=e;return Array.isArray(e)&&!Array.isArray(r)&&(o=t.arrayToObject(e,a)),Array.isArray(e)&&Array.isArray(r)?(r.forEach(function(r,o){i.call(e,o)?e[o]&&"object"==typeof e[o]?e[o]=t.merge(e[o],r,a):e.push(r):e[o]=r}),e):Object.keys(r).reduce(function(e,i){var o=r[i];return Object.prototype.hasOwnProperty.call(e,i)?e[i]=t.merge(e[i],o,a):e[i]=o,e},o)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),i="",a=0;a<t.length;++a){var o=t.charCodeAt(a);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?i+=t.charAt(a):o<128?i+=r[o]:o<2048?i+=r[192|o>>6]+r[128|63&o]:o<55296||o>=57344?i+=r[224|o>>12]+r[128|o>>6&63]+r[128|63&o]:(a+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(a)),i+=r[240|o>>18]+r[128|o>>12&63]+r[128|o>>6&63]+r[128|63&o])}return i},t.compact=function(e,i){if("object"!=typeof e||null===e)return e;var r=i||[],a=r.indexOf(e);if(a!==-1)return r[a];if(r.push(e),Array.isArray(e)){for(var o=[],n=0;n<e.length;++n)e[n]&&"object"==typeof e[n]?o.push(t.compact(e[n],r)):"undefined"!=typeof e[n]&&o.push(e[n]);return o}var s=Object.keys(e);return s.forEach(function(i){e[i]=t.compact(e[i],r)}),e},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!==e&&"undefined"!=typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},476:function(e,t){"use strict";var i=String.prototype.replace,r=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return i.call(e,r,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},477:function(e,t,i){"use strict";var r=i(475),a=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},n=function(e,t){for(var i={},r=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),o=0;o<r.length;++o){var n,s,l=r[o],c=l.indexOf("]=")===-1?l.indexOf("="):l.indexOf("]=")+1;c===-1?(n=t.decoder(l),s=t.strictNullHandling?null:""):(n=t.decoder(l.slice(0,c)),s=t.decoder(l.slice(c+1))),a.call(i,n)?i[n]=[].concat(i[n]).concat(s):i[n]=s}return i},s=function(e,t,i){if(!e.length)return t;var r,a=e.shift();if("[]"===a)r=[],r=r.concat(s(e,t,i));else{r=i.plainObjects?Object.create(null):{};var o="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,n=parseInt(o,10);!isNaN(n)&&a!==o&&String(n)===o&&n>=0&&i.parseArrays&&n<=i.arrayLimit?(r=[],r[n]=s(e,t,i)):r[o]=s(e,t,i)}return r},l=function(e,t,i){if(e){var r=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,n=/(\[[^[\]]*])/g,l=o.exec(r),c=l?r.slice(0,l.index):r,u=[];if(c){if(!i.plainObjects&&a.call(Object.prototype,c)&&!i.allowPrototypes)return;u.push(c)}for(var d=0;null!==(l=n.exec(r))&&d<i.depth;){if(d+=1,!i.plainObjects&&a.call(Object.prototype,l[1].slice(1,-1))&&!i.allowPrototypes)return;u.push(l[1])}return l&&u.push("["+r.slice(l.index)+"]"),s(u,t,i)}};e.exports=function(e,t){var i=t||{};if(null!==i.decoder&&void 0!==i.decoder&&"function"!=typeof i.decoder)throw new TypeError("Decoder has to be a function.");if(i.delimiter="string"==typeof i.delimiter||r.isRegExp(i.delimiter)?i.delimiter:o.delimiter,i.depth="number"==typeof i.depth?i.depth:o.depth,i.arrayLimit="number"==typeof i.arrayLimit?i.arrayLimit:o.arrayLimit,i.parseArrays=i.parseArrays!==!1,i.decoder="function"==typeof i.decoder?i.decoder:o.decoder,i.allowDots="boolean"==typeof i.allowDots?i.allowDots:o.allowDots,i.plainObjects="boolean"==typeof i.plainObjects?i.plainObjects:o.plainObjects,i.allowPrototypes="boolean"==typeof i.allowPrototypes?i.allowPrototypes:o.allowPrototypes,i.parameterLimit="number"==typeof i.parameterLimit?i.parameterLimit:o.parameterLimit,i.strictNullHandling="boolean"==typeof i.strictNullHandling?i.strictNullHandling:o.strictNullHandling,""===e||null===e||"undefined"==typeof e)return i.plainObjects?Object.create(null):{};for(var a="string"==typeof e?n(e,i):e,s=i.plainObjects?Object.create(null):{},c=Object.keys(a),u=0;u<c.length;++u){var d=c[u],p=l(d,a[d],i);s=r.merge(s,p,i)}return r.compact(s)}},557:function(e,t,i){var r,a;i(558),r=i(559),a=i(560),e.exports=r||{},e.exports.__esModule&&(e.exports=e.exports.default),a&&(("function"==typeof e.exports?e.exports.options:e.exports).template=a)},558:function(e,t){},559:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(6),o=r(a),n=i(9),s=r(n),l=i(11),c=r(l),u=i(473),d=r(u);t.default={data:function(){return{spinShow:!0,upUrl:"",self:this,showbox:!1,pageTotal:0,pageCurr:1,selectTableData:[],editor:{begintime:"",endtime:""},playStatus:[],ikeywords:"",iname:"",iid:"",iclevel:"",formItem:{offset:0,count:50,clevel:[5,4,0],userinfo:{reviewer:"",reviewed_at:[],editor:"",edited_at:[]}},columns:[{type:"selection",width:40,align:"center"},{title:"ID",key:"id",align:"center",sortable:!0,width:100},{title:"资源名称",key:"name",sortable:!0,ellipsis:!0,width:200,render:function(e,t,i){return'<i-button type="ghost" shape="circle" :icon="playStatus['+i+'].status" size="small" @click="playPause('+i+')"></i-button> <audio id="audio'+i+'" preload="none"><source src="'+e.content+'" type="audio/mpeg"></audio>\n                        <a v-link="{name:\'resouredetail\', params:{id:'+e.id+'}, query: {action: \'detail\'}}" target="_blank">'+e.name+"</a>"}},{title:"类型",key:"category",align:"center",width:80},{title:"来源",key:"source",align:"center",width:100},{title:"优先级",key:"priority",align:"center",width:80},{title:"资源状态",key:"clevel",align:"center",width:100,render:function(e,t,i){return c.default.getResouceStatus(e.clevel)}},{title:"作者/歌手",key:"artist",align:"center",width:100},{title:"APP显示",key:"appshow",align:"center",width:150,render:function(e,t,i){switch(e.appshow){case!1:return"否";case!0:return"是"}}},{title:"编辑人",key:"userinfo.editor",align:"center",width:120},{title:"编辑时间",key:"userinfo.edited_at",align:"center",width:270,render:function(e,t,i){var r=c.default.dataformat(e.created_at);return r}},{title:"操作",key:"action",align:"center",fixed:"right",width:150,render:function(e,t,i){var r=!1,a=!1;return 5==e.clevel?a=!0:4==e.clevel||(0==e.clevel?r=!0:1==e.clevel?(r=!0,a=!0):2==e.clevel?(r=!0,a=!0):e.clevel==-1?(r=!0,a=!0):3==e.clevel?r=!0:e.clevel==-2?(r=!0,a=!0):(r=!0,a=!0)),'<i-button :disabled="'+a+'" type="primary" size="small" @click="upShelves('+i+')">上架</i-button> <i-button :disabled="'+r+'" type="primary" size="small" @click="downShelves('+i+')">下架</i-button>'}}],searchData:[],catsArr:[],sourceArr:[]}},ready:function(){this.getCats(),this.getSource(),this.searchQuery(0),this.upUrl=s.default.ajaxUrl+"/fileinput"},methods:{getSource:function(){this.sourceArr=c.default.getSource},getCats:function(){var e=this,t={appId:"",id:0,type:0,depth:2};c.default.ajax({method:"POST",url:c.default.getUrl("/tag/list2"),data:t}).then(function(t){var i=t.data;0==i.result?e.catsArr=i.data:e.$Message.warning(i.desc)}).catch(function(e){console.error(e)})},handleSuccess:function(e,t){this.$Message.success(e.msg)},handleFormatError:function(e){this.$Notice.warning({title:"文件格式不正确",desc:"文件 "+e.name+" 格式不正确，请上传 excel 或 csv 格式的文件。"})},handleMaxSize:function(e){this.$Notice.warning({title:"超出文件大小限制",desc:"文件 "+e.name+" 太大，不能超过 10M。"})},handleReset:function(e){this.$refs[e].resetFields(),this.editor={begintime:"",endtime:""},this.ikeywords="",this.iname="",this.iid="",this.iclevel=""},showHighSearch:function(){this.showbox=!this.showbox},parseTime:function(e){return Date.parse(new Date(e))/1e3},searchQuery:function(e){var t=this;""!==this.editor.begintime?this.formItem.userinfo.edited_at[0]=this.parseTime(this.editor.begintime):this.formItem.userinfo.edited_at[0]=0,""!==this.editor.endtime?this.formItem.userinfo.edited_at[1]=this.parseTime(this.editor.endtime):this.formItem.userinfo.edited_at[1]=0,this.pageCurr=1,this.formItem.offset=e,""!==this.ikeywords?this.formItem.keywords=this.ikeywords.split(/[,，]/):this.formItem.keywords=null,""!==this.iname?this.formItem.name=this.iname.split(";"):this.formItem.name=null,""!==this.iid?this.formItem.id=this.iid.split(" "):this.formItem.id=null,""!==this.iclevel?(this.formItem.clevel.splice(0,this.formItem.clevel.length),this.formItem.clevel[0]=this.iclevel,console.log(this.formItem.clevel)):this.formItem.clevel=[5,4,0],console.log(this.formItem),this.$Loading.start(),c.default.ajax({method:"post",url:s.default.ajaxUrl+"/airesources/query",data:this.formItem}).then(function(e){var i=e.data;0==i.result?(t.$Loading.finish(),t.spinShow=!1,t.searchData=i.data.resources,t.pageTotal=i.data.total,t.searchData.forEach(function(e,i,r){t.playStatus.$set(i,{status:"play"})})):t.$Message.warning(i.desc)}).catch(function(e){t.spinShow=!1,t.$Loading.error()})},selectChange:function(e){this.selectTableData=e},changePage:function(e){this.searchQuery(e),this.pageCurr=e},pageSizeChange:function(e){this.formItem.count=e,this.searchQuery(0)},removeItem:function(e){var t=this;this.searchData[e].clevel=-2;var i={json:(0,o.default)(this.searchData[e])};c.default.ajax({method:"post",url:s.default.ajaxUrl+"/airesources/"+this.searchData[e].id,data:d.default.stringify(i)}).then(function(i){var r=i.data;0==r.result?(t.$Message.success(r.msg),t.searchData.splice(e,1)):t.$Message.warning(r.desc)}).catch(function(e){console.log(e)})},upShelves:function(e){var t=this;this.searchData[e].clevel=5;var i={json:(0,o.default)(this.searchData[e])};c.default.ajax({method:"post",url:s.default.ajaxUrl+"/airesources/"+this.searchData[e].id,data:d.default.stringify(i)}).then(function(e){var i=e.data;0==i.result?t.$Notice.success({title:"上架成功!"}):t.$Notice.success({title:i.desc})}).catch(function(e){console.log(e)})},downShelves:function(e){var t=this;this.searchData[e].clevel=0;var i={json:(0,o.default)(this.searchData[e])};c.default.ajax({method:"post",url:s.default.ajaxUrl+"/airesources/"+this.searchData[e].id,data:d.default.stringify(i)}).then(function(e){var i=e.data;0==i.result?t.$Notice.success({title:"下架成功!"}):t.$Notice.success({title:i.desc})}).catch(function(e){console.log(e)})},playPause:function(e){var t=this,i=(event.target,document.getElementById("audio"+e));i.paused?(this.playStatus.forEach(function(i,r,a){if(r!==e){var o=document.getElementById("audio"+r);t.playStatus[r].status="play",o.currentTime=0,o.pause()}}),this.playStatus[e].status="pause",setTimeout(function(){i.play()},150)):(this.playStatus[e].status="play",i.pause())},linkDetail:function(e){this.$router.go({name:"resouredetail",params:{id:this.searchData[e].id}})},batchUpShelves:function(e){var t=this,i=this,r={res_db:"aires",resources:[]};this.selectTableData.forEach(function(t,i,a){r.resources.$set(i,{id:t.id,clevel:e,userinfo:t.userinfo})}),c.default.ajax({method:"post",url:s.default.ajaxUrl+"/airesources/batch",data:r}).then(function(e){var r=e.data;0==r.result?(t.$Message.success(r.msg),setTimeout(function(){i.searchQuery(0)},1e3)):t.$Message.warning(r.desc)}).catch(function(e){console.log(e)})},batchDownShelves:function(e){this.batchUpShelves(e)},batchNo:function(e){this.batchUpShelves(e)}},filters:{toInt:function(e){return parseInt(e)}},route:{data:function(e){e.next()}}}},560:function(e,t){e.exports=' <div class=layout-header _v-35660066=""> </div> <div class=layout-breadcrumb _v-35660066=""> <breadcrumb _v-35660066=""> <breadcrumb-item _v-35660066="">首页</breadcrumb-item> <breadcrumb-item _v-35660066="">音频资源管理</breadcrumb-item> <breadcrumb-item _v-35660066="">音频资源列表</breadcrumb-item> </breadcrumb> </div> <div class=layout-content _v-35660066=""> <div class=layout-content-main _v-35660066=""> <div class=resource-update _v-35660066=""> <div class=update-btn _v-35660066=""> <upload :format="[\'xls\', \'xlsx\', \'csv\']" :on-format-error=handleFormatError :max-size=10240 :on-exceeded-size=handleMaxSize :on-success=handleSuccess multiple="" :action=upUrl _v-35660066=""> <i-button type=primary icon=ios-cloud-upload-outline _v-35660066="">批量更新</i-button> </upload> </div> </div> <div class=resource-search _v-35660066=""> <div class=normal-search _v-35660066=""> <row _v-35660066=""> <i-col span=12 _v-35660066=""> <i-input :value.sync=formItem.search placeholder=请输入... @on-enter=searchQuery(0) _v-35660066=""> <i-button slot=append icon=ios-search @click=searchQuery(0) _v-35660066=""></i-button> </i-input> </i-col> <i-col span=12 _v-35660066=""> <div class=high-btn _v-35660066=""> <i-button type=primary @click=showHighSearch _v-35660066="">高级检索</i-button> </div> </i-col> </row> </div> <div class=high-search v-show=showbox _v-35660066=""> <i-form v-ref:form-item="" :model=formItem :label-width=110 inline="" _v-35660066=""> <form-item label=资源名称： _v-35660066=""> <i-input :value.sync=iname placeholder=请输入 _v-35660066=""></i-input> </form-item> <form-item label=ID： _v-35660066=""> <i-input :value.sync=iid placeholder=请输入 number="" _v-35660066=""></i-input> </form-item> <form-item label=作者/歌手： prop=artist _v-35660066=""> <i-input :value.sync=formItem.artist placeholder=请输入 _v-35660066=""></i-input> </form-item> <form-item label=关键词： _v-35660066=""> <i-input :value.sync=ikeywords placeholder=请输入 _v-35660066=""></i-input> </form-item> <form-item label=分类： prop=tagnew _v-35660066=""> <i-select :model.sync=formItem.tagnew placeholder=请选择 style=width:166px _v-35660066=""> <template v-for="cats in catsArr" _v-35660066=""> <i-option :value="cats.id | toInt" _v-35660066="">{{cats.title}}</i-option> </template> </i-select> </form-item> <form-item label=来源： prop=source _v-35660066=""> <i-select :model.sync=formItem.source placeholder=请选择 style=width:166px _v-35660066=""> <template v-for="item in sourceArr" _v-35660066=""> <i-option :value=item _v-35660066="">{{item}}</i-option> </template> </i-select> </form-item> <form-item label=优先级： prop=priority _v-35660066=""> <i-select :model.sync=formItem.priority placeholder=请选择 style=width:166px _v-35660066=""> <i-option :value="0 | toInt" _v-35660066="">0</i-option> <i-option :value="1 | toInt" _v-35660066="">1</i-option> </i-select> </form-item> <form-item label=资源状态： prop=clevel _v-35660066=""> <i-select :model.sync=iclevel placeholder=请选择 style=width:166px _v-35660066=""> <i-option :value="5 | toInt" _v-35660066="">已上架</i-option> <i-option :value="0 | toInt" _v-35660066="">已下架</i-option> <i-option :value="4 | toInt" _v-35660066="">待上架</i-option> </i-select> </form-item> <form-item label=操作人： prop=userinfo.editor _v-35660066=""> <i-input :value.sync=formItem.userinfo.editor placeholder=请输入 _v-35660066=""></i-input> </form-item> <form-item label=操作时间： _v-35660066=""> <row _v-35660066=""> <i-col span=11 _v-35660066=""> <date-picker type=date placeholder=开始时间 :value.sync=editor.begintime style="width: 166px" _v-35660066=""></date-picker> </i-col> <i-col span=2 _v-35660066=""> <div class=center-line _v-35660066=""> - </div> </i-col> <i-col span=11 _v-35660066=""> <date-picker type=date placeholder=结束时间 :value.sync=editor.endtime style="width: 166px" _v-35660066=""></date-picker> </i-col> </row> </form-item> <form-item label=是否在APP显示： prop=appshow _v-35660066=""> <i-select :model.sync=formItem.appshow placeholder=请选择 style=width:90px _v-35660066=""> <i-option value=true _v-35660066="">是</i-option> <i-option value=false _v-35660066="">否</i-option> </i-select> </form-item> <form-item :label-width=10 _v-35660066=""> <i-button type=primary @click=searchQuery(0) _v-35660066="">搜索</i-button> <i-button type=ghost @click="handleReset(\'formItem\')" style="margin-left: 5px" _v-35660066="">重置</i-button> </form-item> </i-form> </div> </div> <div v-if=spinShow class=spin-box _v-35660066=""> <spin size=large fix="" _v-35660066=""></spin> </div> <div v-else="" class=search-data _v-35660066=""> <i-table style=max-width:1490px :content=self :columns=columns :data=searchData @on-selection-change=selectChange size=small _v-35660066=""></i-table> <div class=batch-action _v-35660066=""> <i-button type=ghost @click=batchUpShelves(5) _v-35660066="">批量上架</i-button> <i-button type=ghost @click=batchDownShelves(0) _v-35660066="">批量下架</i-button> <i-button type=ghost @click=batchNo(-1) _v-35660066="">批量不处理</i-button> </div> <div class=paging-box _v-35660066=""> <div class=paging-container _v-35660066=""> <page :total=pageTotal :page-size=formItem.count :page-size-opts=[50,100,200] show-total="" :current=pageCurr show-sizer="" @on-page-size-change=pageSizeChange @on-change=changePage show-elevator="" _v-35660066=""></page> </div> </div> </div> </div> </div> '}});