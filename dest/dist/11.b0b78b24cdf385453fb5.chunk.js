webpackJsonp([11],{549:function(e,t,a){var i,n;a(550),i=a(551),n=a(552),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports.default),n&&(("function"==typeof e.exports?e.exports.options:e.exports).template=n)},550:function(e,t){},551:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(6),o=i(n),l=a(9),r=(i(l),a(11)),s=i(r);t.default={data:function(){return{selectedfiles:[],tabledata:[],selectData:null,nickname:[],type:[],names:[],uploadtable:[{title:"资源名称",key:"name",render:function(e,t,a){return'<i-input :value.sync="names['+a+']"></i-input>'}},{title:"文件名称",key:"name",align:"center"},{title:"大小",key:"size",align:"center",render:function(e,t,a){var i=s.default.formatFileSize(e.size);return i}},{title:"别名",key:"nickname",align:"center",render:function(e,t,a){return'<i-input :value.sync="nickname['+a+']"></i-input>'}},{title:"分类",key:"type",align:"center",render:function(e,t,a){return'<i-select :model.sync="type['+a+']">\n                          <i-option value="music">音乐</i-option>\n                          <i-option value="song">儿歌</i-option>\n                        </i-select>'}},{title:"状态",key:"status",align:"center",width:150,render:function(e,t,a){var i=s.default.getUploadStatus(e.status);return i}},{title:"操作",key:"action",width:150,align:"center",render:function(e,t,a){return'<i-button type="error" icon="trash-a"\n                        @click="removeItem('+a+')">删除</i-button>'}}]}},ready:function(){this.getSongInfo()},methods:{choosefiles:function(){this.tabledata=[];for(var e=document.getElementById("choosebtn").files,t=0;t<e.length;t++){var a={name:e[t].name,size:e[t].size,lastModified:e[t].lastModified,webkitRelativePath:e[t].webkitRelativePath,status:-1,nickname:"",type:"music"};this.tabledata.push(a),this.type.push("music")}},getSongInfo:function(){},selectChange:function(e){this.selectData=e},removeItem:function(e){this.tabledata.splice(e,1),this.nickname.splice(e,1),this.type.splice(e,1)},createdFinish:function(){var e=this;console.log(this.type);for(var t=new FormData(document.getElementById("uploadform")),a=document.getElementById("choosebtn").files,i=0;i<a.length;i++)t.append("file"+i,a[i]);for(var n=0;n<this.tabledata.length;n++)this.tabledata[n].name=this.names[n],this.tabledata[n].nickname=this.nickname[n],this.tabledata[n].type=this.type[n],this.tabledata[n].userinfo={editor:s.default.getCurrentEditor()[0],editor_email:s.default.getCurrentEditor()[1]};t.append("json",(0,o.default)(this.tabledata)),this.$Loading.start(),s.default.ajax({method:"POST",url:s.default.getUrl("/airesources"),data:t}).then(function(t){e.$Loading.finish();var a=t.data.data.failed;e.updateUploadState(a),e.info("上传完成!")}).catch(function(e){console.error(e)})},updateUploadState:function(e){for(var t=0;t<this.tabledata.length;t++)if(this.tabledata[t].status=1,e)for(var a=0;a<e.length;a++)this.tabledata[t].name===e[a]&&(this.tabledata[t].status=0)},saveItemEdit:function(e){},info:function(e){this.$Notice.info({title:e,desc:""})},importInfo:function(){}}}},552:function(e,t){e.exports=' <div class=layout-header _v-3e7b2c20=""> </div> <div class=layout-breadcrumb _v-3e7b2c20=""> <breadcrumb _v-3e7b2c20=""> <breadcrumb-item _v-3e7b2c20="">首页</breadcrumb-item> <breadcrumb-item _v-3e7b2c20="">音频资源管理</breadcrumb-item> <breadcrumb-item _v-3e7b2c20="">上传音频资源</breadcrumb-item> </breadcrumb> </div> <div class=layout-content _v-3e7b2c20=""> <div class=layout-content-main _v-3e7b2c20=""> <i-form id=uploadform enctype=multipart/form-data _v-3e7b2c20=""> <input type=file class=ivu-upload-input v-on:change.stop.prevent=choosefiles() id=choosebtn accept="audio/basic,\n        audio/mid,audio/mpeg,\n        audio/x-pn-realaudio,\n        audio/x-wav,\n        audio/x-pn-realaudio\n        audio/x-mpegurl" multiple="" _v-3e7b2c20=""> </i-form> <div class=main-table _v-3e7b2c20=""> <i-table :content=self :columns=uploadtable :data=tabledata @on-selection-change=selectChange _v-3e7b2c20=""> </i-table> </div> <div class=btn-box _v-3e7b2c20=""> <i-button type=primary @click.stop.prevent=createdFinish() _v-3e7b2c20="">保存</i-button> </div> </div> </div> '}});